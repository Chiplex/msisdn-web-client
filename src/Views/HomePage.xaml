<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:MSISDNWebClient.ViewModels"
             x:Class="MSISDNWebClient.Views.HomePage"
             x:DataType="vm:HomeViewModel"
             BackgroundColor="{StaticResource PageBackground}">

    <ScrollView>
        <VerticalStackLayout Padding="20"
                            Spacing="20">

            <!-- Header -->
            <Label Text="Mi Identidad"
                   Style="{StaticResource TitleStyle}"
                   Margin="10,20,0,0" />

            <!-- Tarjeta de Identidad -->
            <Frame Style="{StaticResource CardStyle}"
                   Padding="25">
                <VerticalStackLayout Spacing="15">
                    
                    <Label Text="{Binding DisplayName}"
                           FontSize="24"
                           FontAttributes="Bold"
                           TextColor="{StaticResource TextPrimary}"
                           HorizontalTextAlignment="Center" />

                    <BoxView HeightRequest="1"
                             Color="{StaticResource Gray300}"
                             Margin="0,5" />

                    <HorizontalStackLayout Spacing="10"
                                          HorizontalOptions="Center">
                        <Label Text="PersonaID:"
                               FontSize="14"
                               TextColor="{StaticResource TextSecondary}" />
                        <Label Text="{Binding PersonaIdDisplay}"
                               FontSize="14"
                               FontAttributes="Bold"
                               FontFamily="Monospace"
                               TextColor="{StaticResource Primary}" />
                    </HorizontalStackLayout>

                    <Button Text=" Copiar ID Completo"
                            Command="{Binding CopyPersonaIdCommand}"
                            Style="{StaticResource SecondaryButtonStyle}"
                            FontSize="14"
                            HeightRequest="40" />

                    <!-- Estado de verificaci贸n -->
                    <HorizontalStackLayout Spacing="8"
                                          HorizontalOptions="Center"
                                          Margin="0,10,0,0">
                        <Label Text="{Binding IsVerified, Converter={StaticResource BoolToVerifiedStatusConverter}}"
                               FontSize="14"
                               TextColor="{Binding IsVerified, Converter={StaticResource BoolToVerifiedColorConverter}}"
                               FontAttributes="Bold" />
                    </HorizontalStackLayout>

                </VerticalStackLayout>
            </Frame>

            <!-- Acciones Principales -->
            <VerticalStackLayout Spacing="15">
                
                <Button Text=" Mi Espacio Web Persona"
                        Command="{Binding GoToProfileCommand}"
                        Style="{StaticResource PrimaryButtonStyle}"
                        HeightRequest="60"
                        FontSize="16" />

                <Button Text=" Explorar Personas"
                        Command="{Binding GoToExplorerCommand}"
                        Style="{StaticResource SecondaryButtonStyle}"
                        HeightRequest="60"
                        FontSize="16" />

            </VerticalStackLayout>

            <!-- Informaci贸n adicional -->
            <Frame Style="{StaticResource InfoCardStyle}"
                   Margin="0,20,0,0">
                <VerticalStackLayout Spacing="10">
                    <Label Text=" Tu identidad est谩 segura"
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="{StaticResource TextPrimary}" />
                    
                    <Label Text="Tu clave privada est谩 cifrada y guardada solo en este dispositivo. Nunca se env铆a a ning煤n servidor."
                           FontSize="12"
                           TextColor="{StaticResource TextSecondary}"
                           LineBreakMode="WordWrap" />
                </VerticalStackLayout>
            </Frame>

            <!-- Bot贸n de cerrar sesi贸n -->
            <Button Text="Cerrar Sesi贸n"
                    Command="{Binding LogoutCommand}"
                    BackgroundColor="Transparent"
                    TextColor="{StaticResource Error}"
                    FontSize="14"
                    Margin="0,20,0,30" />

            <ActivityIndicator IsRunning="{Binding IsBusy}"
                              Color="{StaticResource Primary}"
                              HeightRequest="40" />

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
